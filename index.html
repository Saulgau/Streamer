<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamer Portal | NextStream</title>
    <style>
        :root {
            --primary: #1a73e8;
            --dark: #0a192f;
            --darker: #020c1b;
            --light: #c3d4f3;
            --gradient: linear-gradient(135deg, #1a73e8 0%, #0a192f 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui;
        }

        body {
            background: var(--darker);
            color: white;
            min-height: 100vh;
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 2rem;
            padding: 2rem;
        }

        .stream-container {
            background: var(--dark);
            border-radius: 1rem;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 2rem rgba(0,0,0,0.3);
        }

        #preview {
            width: 100%;
            height: 70vh;
            object-fit: contain;
        }

        .controls {
            padding: 1rem;
            display: flex;
            gap: 1rem;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .chat {
            background: var(--dark);
            border-radius: 1rem;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            height: 70vh;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: var(--darker);
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        .message {
            background: rgba(255,255,255,0.05);
            padding: 0.8rem;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .message.streamer {
            border-left: 4px solid var(--primary);
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
        }

        input, textarea {
            flex: 1;
            background: var(--darker);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 0.8rem;
            border-radius: 0.5rem;
            resize: none;
        }

        .user-badge {
            font-size: 0.8rem;
            background: var(--primary);
            padding: 0.2rem 0.5rem;
            border-radius: 1rem;
            display: inline-block;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="stream-container">
        <video id="preview" autoplay muted></video>
        <div class="controls">
            <button onclick="startStream()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                    <path d="M5 4h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3zm7 13a5 5 0 1 0 0-10 5 5 0 0 0 0 10z"/>
                </svg>
                Stream starten
            </button>
        </div>
    </div>

    <div class="chat">
        <div class="chat-messages" id="chat"></div>
        <div class="chat-input">
            <input type="text" id="message" placeholder="Nachricht senden..." 
                   onkeypress="if(event.key === 'Enter') sendMessage()">
            <button onclick="sendMessage()">Senden</button>
        </div>
    </div>

    <script>
        let stream;
        
        async function startStream() {
            try {
                stream = await navigator.mediaDevices.getDisplayMedia({ 
                    video: true,
                    audio: true 
                });
                document.getElementById('preview').srcObject = stream;
            } catch (err) {
                alert('Fehler beim Starten des Streams: ' + err);
            }
        }

        function sendMessage() {
            const input = document.getElementById('message');
            const message = input.value.trim();
            if (!message) return;

            const chatData = JSON.parse(localStorage.getItem('stream-chat') || '[]');
            chatData.push({
                user: 'Streamer',
                message,
                timestamp: new Date().toISOString(),
                type: 'streamer'
            });
            
            localStorage.setItem('stream-chat', JSON.stringify(chatData));
            input.value = '';
            updateChat();
        }

        function updateChat() {
            const chat = document.getElementById('chat');
            const messages = JSON.parse(localStorage.getItem('stream-chat') || '[]');
            
            chat.innerHTML = messages.map(msg => `
                <div class="message ${msg.type}">
                    ${msg.type === 'streamer' ? 
                        '<span class="user-badge">Streamer</span>' : 
                        `<span style="color: ${msg.color}">${msg.user}</span>`}
                    ${msg.message}
                </div>
            `).join('');
            chat.scrollTop = chat.scrollHeight;
        }

        setInterval(updateChat, 1000);
    </script>
</body>
</html>
